# SSHD configuration
#---------------------------------------------------------------------------------------------------
{ config, lib, ... }:
let
  cfg = config.services.raw.openssh;
in
{
  options = {
    services.raw.openssh = {
      enable = lib.mkEnableOption "Install and configure openssh server";
    };
  };

  config = lib.mkIf (cfg.enable) {
    services.openssh.enable = true;

    users.motd = ''
      -----------------------------------------------------------------------------------------
                                                   |
                        |                        .$$
                        $$.                     .$$$
                        $$$.                    $$$$
                        $$$$                    $$$$
       -===============-$$$$-==================-$$$$-=========- -high tech, low life -=======-
                        $$$$                    $$$$
                        $$$$  ....        ..    $$$$  .### ..    .,,,    ,,'$$        $$$$$'
          .4$$$$$$$$$$. $$####|$$$B.4BBBBBBB$##|$$$$|B#### $$$$$$$$$$$ii $$$$3$      $$$$$
          $$$$$$$$$$$$$ $$####|4$$$B|BBBBBBBB##|$$$$|B'    9$$$P$$$9$$$$ $$$#$$$    $$$$$
          $$$$    ####' $$#### '4$$$$     ####  $$$$  $$$$ 0$$$  BB|$$$$ $$$#$$$$..$$$$$
          $$$$    ####  $$####   $$$$BBBBBBBBB  $$$$  $$$$ $$$$  $$|$$$$ $$$$ $$$$$$$$'
          $$$$    ####  $$####   $$$$BBBBBBBBB  $$$$  $$$$ $$$$  $$|$$$$ $$$$ '$$$$$$$
          $$$$    ###P  $$####   $$$E     ####  $$$$  $$$$ $$$$  $$|$$$E $$$$.$$$$$$$$$
          $$$$    ######$$#### .d$$$E     ####  $$$$  $$$$ $$$$  $$|$$$E3$$$$3$$$  $$$$$
      -==-$$$$$$$$$$$$$#######|B9$$'BBBBBBBBB$--$$$$--$$$$-$$$$--$$|$$$E3$$$|$$$-==-$$$$$-====-
       -=-'4$$$$$$$$$P-=-'####|BBP'9BVVVVVVVBV--$$$$--VVV'-VVVV--``'VVVV``$$$$$-====-$$$$$-==-
         -=======-.###########-==========-####--$$$'--'-===============-.$$$$$-======-$$$$$.TM
                  '##########'                  $$'  -phR0ze
                                                |

    '';
  };
}
